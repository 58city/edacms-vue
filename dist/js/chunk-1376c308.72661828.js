(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1376c308"],{"026e":function(e,t,r){},"141b":function(e,t,r){},2869:function(e,t,r){},3615:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"install"}},[n("img",{attrs:{src:r("e250"),alt:""}}),n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.installing,expression:"installing"}]},[n("el-steps",{attrs:{active:e.currentStep}},[n("el-step",{attrs:{title:"步骤 1",description:"安装许可协议"}}),n("el-step",{attrs:{title:"步骤 2",description:"MongoDB 数据库配置"}}),n("el-step",{attrs:{title:"步骤 3",description:"初始化网站配置"}}),n("el-step",{attrs:{title:"步骤 4",description:"安装成功"}})],1),1==e.currentStep?n("install-license"):e._e(),2==e.currentStep?n("install-data-base",{ref:"dbInfoForm",attrs:{showError:e.showError},on:{formBlur:e.getFormStatus}}):e._e(),3==e.currentStep?n("install-site-info",{ref:"siteInfoForm",attrs:{themes:e.themes,themeError:e.themeError,showError:e.showError},on:{formBlur:e.getFormStatus}}):e._e(),4==e.currentStep?n("install-finish"):e._e(),e.currentStep>1&&e.currentStep<4?n("el-button",{attrs:{type:"default"},on:{click:e.prev}},[e._v("上一步")]):e._e(),1==e.currentStep?n("el-button",{attrs:{type:"primary"},on:{click:e.agree}},[e._v("我已阅读并同意本协议内容")]):e._e(),2==e.currentStep?n("el-button",{attrs:{type:"primary",disabled:!e.formValid},on:{click:e.testDb}},[e._v("连接数据库")]):e._e(),3==e.currentStep?n("el-button",{attrs:{type:"primary",disabled:!e.formValid},on:{click:e.install}},[e._v("安装")]):e._e()],1)],1)},o=[],s=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"license"}},[r("p",[e._v("感谢您选择 EdaCMS 产品。希望我们的努力能为您提供一个高效快速和强大的网站解决方案。")]),r("p",[e._v("EdaCMS 全称为 EdaCMS 内容管理系统。 EdaCMS 内容管理系统的官方网站为 http://www.xxx.com，是 EdaCMS 产品的开发商，依法独立拥有 EdaCMS 产品著作权。 EdaCMS 著作权受到法律和国际公约保护。使用者：无论个人或组织、盈利与否、用途如何（包括以学习和研究为目的），均需仔细阅读本协议，在理解、同意、并遵守本协议的全部条款后，方可开始使用 EdaCMS 软件。 本授权协议适用且仅适用于 EdaCMS 产品，xxxxxxxxxx有限公司拥有对本授权协议的最终解释权。")]),r("h4",[e._v("协议许可的权利")]),r("p",[e._v("您可以在完全遵守本最终用户授权协议的基础上，将本软件应用于非商业用途，而不必支付软件版权授权费用。 您可以在协议规定的约束和限制范围内修改 EdaCMS 源代码（如果被提供的话）或界面风格以适应您的网站要求。 您拥有使用本软件构建的网站中全部资料、文章及相关信息的所有权，并独立承担与文章内容的相关法律义务。 获得商业授权之后，您可以将本软件应用于商业用途，同时依据所购买的授权类型中确定的技术支持期限、技术支持方式和技术支持内容，自购买时刻起，在技术支持期限内拥有通过指定的方式获得指定范围内的技术支持服务。商业授权用户享有反映和提出意见的权力，相关意见将被作为首要考虑，但没有一定被采纳的承诺或保证。 ")]),r("h4",[e._v("协议规定的约束和限制")]),r("p",[e._v("未获商业授权之前，不得将本软件用于商业用途（包括但不限于企业网站、经营性网站、以营利为目或实现盈利的网站）。购买商业授权请登陆 http://www.xxx.com 参考相关说明。 不得对本软件或与之关联的商业授权进行出租、出售、抵押或发放子许可证。 无论如何，即无论用途如何、是否经过修改或美化、修改程度如何，只要使用 EdaCMS 的整体或任何部分，未经书面许可，网站页面页脚处的 EdaCMS 名称和 http://www.xxx.com 的链接都必须保留，而不能清除或修改，除非您获得xxxxxxxxxx有限公司授权许可。 禁止在 EdaCMS 的整体或任何部分基础上以发展任何派生版本、修改版本或第三方版本用于重新分发。 如果您未能遵守本协议的条款，您的授权将被终止，所被许可的权利将被收回，并承担相应法律责任。")]),r("h4",[e._v("有限担保和免责声明")]),r("p",[e._v("本软件及所附带的文件是作为不提供任何明确的或隐含的赔偿或担保的形式提供的。 用户出于自愿而使用本软件，您必须了解使用本软件的风险，在尚未购买产品技术服务之前，我们不承诺提供任何形式的技术支持、使用担保，也不承担任何因使用本软件而产生问题的相关责任。 xxxxxxxxxx有限公司不对使用本软件构建的网站中的文章或信息承担责任。 有关 EdaCMS 最终用户授权协议、商业授权与技术服务的详细内容，均由 EdaCMS 官方网站独家提供。xxxxxxxxxx有限公司拥有在不事先通知的情况下，修改授权协议和服务价目表的权力，修改后的协议或价目表对自改变之日起的新授权用户生效。")]),r("p",[e._v("电子文本形式的授权协议如同双方书面签署的协议一样，具有完全的和等同的法律效力。您一旦开始安装 EdaCMS，即被视为完全理解并接受本协议的各项条款，在享有上述条款授予的权力的同时，受到相关的约束和限制。协议许可范围以外的行为，将直接违反本授权协议并构成侵权，我们有权随时终止授权，责令停止损害，并保留追究相关责任的权力。 ")])])}],l={name:"InstallLicense"},i=l,u=(r("cc27"),r("2877")),c=Object(u["a"])(i,s,a,!1,null,"1718eebc",null),f=c.exports,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"databse"}},[r("el-form",{ref:"dbform",attrs:{model:e.dbInfo,rules:e.rules,"label-width":"134px"}},[r("el-form-item",{attrs:{label:"数据库主机：",prop:"host"}},[r("el-input",{attrs:{type:"text"},on:{blur:e.formBlur},model:{value:e.dbInfo.host,callback:function(t){e.$set(e.dbInfo,"host",t)},expression:"dbInfo.host"}}),r("p",[e._v("如果数据库与网站位于同一台服务器，默认填写 127.0.0.1 即可")])],1),r("el-form-item",{attrs:{label:"数据库端口：",prop:"port"}},[r("el-input",{attrs:{type:"number"},on:{blur:e.formBlur},model:{value:e.dbInfo.port,callback:function(t){e.$set(e.dbInfo,"port",e._n(t))},expression:"dbInfo.port"}}),r("p",[e._v("如果没有修改过MongoDB数据库端口，默认填写 27017 即可")])],1),r("el-form-item",{attrs:{label:"数据库名称：",prop:"db"}},[r("el-input",{attrs:{type:"text"},on:{blur:e.formBlur},model:{value:e.dbInfo.db,callback:function(t){e.$set(e.dbInfo,"db",t)},expression:"dbInfo.db"}})],1),r("el-form-item",{attrs:{label:"数据库登录名：",prop:"user"}},[r("el-input",{attrs:{type:"text"},on:{blur:e.formBlur},model:{value:e.dbInfo.user,callback:function(t){e.$set(e.dbInfo,"user",t)},expression:"dbInfo.user"}})],1),r("el-form-item",{attrs:{label:"数据库登录密码：",prop:"pass"}},[r("el-input",{attrs:{type:"password"},on:{blur:e.formBlur},model:{value:e.dbInfo.pass,callback:function(t){e.$set(e.dbInfo,"pass",t)},expression:"dbInfo.pass"}})],1),r("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.showError,expression:"showError"}],attrs:{title:"数据库连接失败，请检查是否填写正确或联系数据库管理员",type:"error",effect:"dark",closable:!1}})],1)],1)},m=[],p={name:"InstallDataBase",data:function(){return{dbInfo:{host:"127.0.0.1",port:27017,db:"",user:"",pass:""},rules:{host:[{required:!0,message:"主机地址必填",trigger:"blur"},{pattern:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$|^localhost$/,message:"主机应为为 IP 地址或 localhost",trigger:"blur"}],port:[{required:!0,message:"端口号必填",trigger:"blur"},{validator:function(e,t,r){t>65535||t<0?r(new Error("端口应为 0 ~ 65535 之间")):r()},trigger:"blur"}],db:[{required:!0,message:"数据库名称必填",trigger:"blur"}],user:[{required:!0,message:"数据库登录名必填",trigger:"blur"}],pass:[{required:!0,message:"数据库登录密码必填",trigger:"blur"}]}}},methods:{formBlur:function(){var e=this;this.$refs.dbform.validate((function(t){e.$emit("formBlur",t),e.$refs.dbform.clearValidate()}))}},props:{showError:{type:Boolean,default:!1}}},b=p,h=(r("674d"),Object(u["a"])(b,d,m,!1,null,"f227e9ba",null)),x=h.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"siteInfo"}},[r("el-form",{ref:"siteInfoForm",attrs:{model:e.siteInfo,rules:e.rules,"label-width":"92px"}},[r("el-form-item",{attrs:{label:"网站标题：",prop:"title"}},[r("el-input",{attrs:{type:"text"},on:{blur:e.formBlur},model:{value:e.siteInfo.title,callback:function(t){e.$set(e.siteInfo,"title",t)},expression:"siteInfo.title"}})],1),r("el-form-item",{attrs:{label:"页面主题：",prop:"theme",error:e.themeError?"主题读取失败，请检查 /public/themes/ 下主题目录完整性":""}},[r("el-select",{model:{value:e.siteInfo.theme,callback:function(t){e.$set(e.siteInfo,"theme",t)},expression:"siteInfo.theme"}},e._l(e.themes,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.directory}})})),1)],1),r("el-form-item",{attrs:{label:"Email：",prop:"email"}},[r("el-input",{attrs:{type:"text"},on:{blur:e.formBlur},model:{value:e.siteInfo.email,callback:function(t){e.$set(e.siteInfo,"email",t)},expression:"siteInfo.email"}})],1),r("el-form-item",{attrs:{label:"昵称：",prop:"nickname"}},[r("el-input",{attrs:{type:"text"},on:{blur:e.formBlur},model:{value:e.siteInfo.nickname,callback:function(t){e.$set(e.siteInfo,"nickname",t)},expression:"siteInfo.nickname"}})],1),r("el-form-item",{attrs:{label:"密码：",prop:"password"}},[r("el-input",{attrs:{type:"password"},on:{blur:e.formBlur},model:{value:e.siteInfo.password,callback:function(t){e.$set(e.siteInfo,"password",t)},expression:"siteInfo.password"}})],1),r("el-form-item",{attrs:{label:"确认密码：",prop:"confirm"}},[r("el-input",{attrs:{type:"password"},on:{blur:e.formBlur},model:{value:e.siteInfo.confirm,callback:function(t){e.$set(e.siteInfo,"confirm",t)},expression:"siteInfo.confirm"}})],1),r("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.showError,expression:"showError"}],attrs:{title:"安装请求失败，请尝试重启服务器与数据库并重新安装",type:"error",effect:"dark",closable:!1}})],1)],1)},I=[],g={name:"InstallSiteInfo",data:function(){var e=this;return{siteInfo:{title:"",theme:this.themes[0].directory,email:"",nickname:"",password:"",confirm:""},rules:{title:[{required:!0,message:"网站标题为必填项",trigger:"blur"}],theme:[{required:!0,message:"页面主题为必填项",trigger:["blur","change"]}],email:[{required:!0,message:"电子邮箱为必填项",trigger:"blur"},{pattern:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,message:"请填写正确的邮箱地址",trigger:"blur"}],nickname:[{required:!0,message:"昵称为必填项",trigger:"blur"}],password:[{validator:function(t,r,n){""===r?n(new Error("请输入密码")):r.length<6?n(new Error("密码不得小于6位")):(""!==e.siteInfo.confirm&&e.$refs.siteInfoForm.validateField("confirm"),n())},trigger:"blur"}],confirm:[{validator:function(t,r,n){""===r?n(new Error("请再次输入密码")):r!==e.siteInfo.password?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}]}}},methods:{formBlur:function(){var e=this;this.$refs.siteInfoForm.validate((function(t){e.$emit("formBlur",t),e.$refs.siteInfoForm.clearValidate()}))}},props:{themes:{type:Array,default:function(){return[]}},showError:{type:Boolean,default:!1},themeError:{type:Boolean,default:!1}}},w=g,E=(r("7d9f"),Object(u["a"])(w,v,I,!1,null,"65c2fb0a",null)),_=E.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"installFinish"}},[r("el-button",{attrs:{type:"success"},on:{click:e.openAdmin}},[e._v("登录管理后台")])],1)},$=[],k=(r("ac1f"),r("5319"),{name:"InstallFinish",methods:{openAdmin:function(){this.$router.replace("/login")}}}),y=k,B=(r("4a7bd"),Object(u["a"])(y,S,$,!1,null,"70ddc5ae",null)),M=B.exports,C=r("0dee"),F={name:"Install",data:function(){return{themeError:!1,themes:[],currentStep:1,formValid:!1,showError:!1,dbInfo:{},installing:!1}},created:function(){this.getThemes()},methods:{getFormStatus:function(e){this.formValid=e},prev:function(){this.currentStep--,this.showError=!1},agree:function(){this.currentStep++},getThemes:function(){var e=this;Object(C["c"])().then((function(t){e.themeError=!1,e.themes=t.data})).catch((function(t){e.themeError=!0}))},testDb:function(){var e=this;this.formValid&&Object(C["d"])(this.$refs.dbInfoForm.dbInfo).then((function(t){e.showError=!1,e.dbInfo=e.$refs.dbInfoForm.dbInfo,e.currentStep++})).catch((function(t){e.showError=!0}))},install:function(){var e=this;if(this.formValid){var t=Object.assign(this.dbInfo,this.$refs.siteInfoForm.siteInfo);delete t.confirm,this.installing=!0,Object(C["b"])(t).then((function(t){e.installing=!1,e.showError=!1,e.currentStep++})).catch((function(t){e.installing=!1,e.showError=!0}))}}},components:{InstallLicense:f,InstallDataBase:x,InstallSiteInfo:_,InstallFinish:M}},j=F,q=(r("8ea2"),Object(u["a"])(j,n,o,!1,null,"707b1f64",null));t["default"]=q.exports},"4a7bd":function(e,t,r){"use strict";var n=r("55b6"),o=r.n(n);o.a},"55b6":function(e,t,r){},"674d":function(e,t,r){"use strict";var n=r("2869"),o=r.n(n);o.a},"7d9f":function(e,t,r){"use strict";var n=r("da46"),o=r.n(n);o.a},"8ea2":function(e,t,r){"use strict";var n=r("026e"),o=r.n(n);o.a},cc27:function(e,t,r){"use strict";var n=r("141b"),o=r.n(n);o.a},da46:function(e,t,r){},e250:function(e,t,r){e.exports=r.p+"img/logo-lg.85a59f3f.png"}}]);
//# sourceMappingURL=chunk-1376c308.72661828.js.map